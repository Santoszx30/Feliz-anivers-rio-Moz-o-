<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>P√°gina 6 üíú</title>

<style>
body{
  margin:0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(180deg,#2b0040,#000);
  color:#fff;
  overflow-x:hidden;
}

h1{
  text-align:center;
  margin:20px 10px;
  font-size:1.2rem;
}

/* TABULEIRO */
#board{
  position:relative;
  width:90vw;
  max-width:360px;
  aspect-ratio:1/1;
  margin:0 auto;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  grid-template-rows:repeat(4,1fr);
  border-radius:16px;
  background:#1a001f;
  box-shadow:0 0 20px rgba(180,0,255,.4);
}

/* SLOTS */
.slot{
  border:1px dashed rgba(255,255,255,.2);
}

/* √ÅREA DAS PE√áAS */
#pieces{
  position:relative;
  width:100%;
  height:38vh;
  margin-top:15px;
}

/* PE√áAS */
.piece{
  position:absolute;
  width:22vw;
  max-width:80px;
  aspect-ratio:1/1;
  background-image:url("quebra/cabeca.jpg");
  background-size:400% 400%;
  border-radius:8px;
  cursor:grab;
  touch-action:none;
  box-shadow:0 4px 10px rgba(0,0,0,.6);
}

/* TEXTO FINAL */
#finalText{
  display:none;
  max-width:90%;
  margin:40px auto;
  font-size:1.15rem;
  line-height:1.9;
  text-align:center;
}

/* BOT√ÉO */
#btnNext{
  display:none;
  margin:30px auto 60px;
  padding:14px 28px;
  border:none;
  border-radius:30px;
  font-size:1rem;
  background:linear-gradient(45deg,#a855f7,#7c3aed);
  color:#fff;
}
</style>
</head>

<body>

<h1>Monte o que somos üíú</h1>

<div id="board"></div>

<div id="pieces"></div>

<div id="finalText"></div>

<button id="btnNext" onclick="window.location.href='pagina7.html'">
Continuar üíú
</button>

<script>
const rows=4, cols=4;
const board=document.getElementById("board");
const piecesContainer=document.getElementById("pieces");
const finalText=document.getElementById("finalText");
const btnNext=document.getElementById("btnNext");

let placed=0;
const total=rows*cols;

/* CRIA SLOTS */
for(let i=0;i<total;i++){
  const s=document.createElement("div");
  s.className="slot";
  board.appendChild(s);
}

/* CRIA PE√áAS */
let pieces=[];
for(let y=0;y<rows;y++){
  for(let x=0;x<cols;x++){
    const p=document.createElement("div");
    p.className="piece";
    p.dataset.x=x;
    p.dataset.y=y;
    p.style.backgroundPosition=`${x*33.33}% ${y*33.33}%`;
    pieces.push(p);
  }
}

/* EMBARALHAR */
pieces.sort(()=>Math.random()-0.5);

/* POSICIONAR PE√áAS VIS√çVEIS */
pieces.forEach((p,i)=>{
  p.style.left=(10 + (i%4)*23)+"vw";
  p.style.top=(10 + Math.floor(i/4)*9)+"vh";
  piecesContainer.appendChild(p);
});

/* DRAG */
let current=null, offsetX=0, offsetY=0;

document.addEventListener("pointerdown",e=>{
  if(e.target.classList.contains("piece")){
    current=e.target;
    offsetX=e.clientX-current.offsetLeft;
    offsetY=e.clientY-current.offsetTop;
    current.setPointerCapture(e.pointerId);
  }
});

document.addEventListener("pointermove",e=>{
  if(current){
    current.style.left=(e.clientX-offsetX)+"px";
    current.style.top=(e.clientY-offsetY)+"px";
  }
});

document.addEventListener("pointerup",()=>{
  if(current){
    const bx=board.getBoundingClientRect();
    const cx=current.getBoundingClientRect();
    const size=board.offsetWidth/cols;

    const x=Math.floor((cx.left-bx.left)/size);
    const y=Math.floor((cx.top-bx.top)/size);

    if(x==current.dataset.x && y==current.dataset.y){
      current.style.left=(bx.left + x*size)+"px";
      current.style.top=(bx.top + y*size)+"px";
      current.style.pointerEvents="none";
      placed++;
      if(placed===total) startText();
    }
    current=null;
  }
});

/* TEXTO FINAL */
const texto=`
Montar cada parte dessa imagem √© quase como reviver cada detalhe da gente.
Porque quando nossas partes se encaixam, n√£o sobra espa√ßo pra d√∫vida.
Seu corpo no meu, sua pele sob a minha, nossos olhares se encontrando
como se soubessem exatamente onde pertencem.

O jeito que voc√™ se entrega, o jeito que me provoca,
o jeito que me faz querer ficar.
Voc√™ n√£o √© s√≥ desejo ‚Äî voc√™ √© presen√ßa,
√© vontade que n√£o passa,
√© toque que arrepia e acalma ao mesmo tempo.

Se eu pudesse, montaria voc√™ todos os dias,
sem pressa, sem ordem,
apenas sentindo cada peda√ßo de n√≥s dois.
`;

/* LETRA POR LETRA */
function startText(){
  finalText.style.display="block";
  let i=0;
  const interval=setInterval(()=>{
    finalText.innerHTML+=texto.charAt(i);
    i++;
    window.scrollBy(0,1);
    if(i>=texto.length){
      clearInterval(interval);
      btnNext.style.display="block";
    }
  },40);
}
</script>

</body>
</html>
