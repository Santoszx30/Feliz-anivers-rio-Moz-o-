<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>P√°gina 6</title>

<style>
/* ===== FUNDO ===== */
body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #1a002a, #3b0066);
  font-family: Arial, sans-serif;
  color: white;
  overflow-x: hidden;
}

/* ===== T√çTULO ===== */
h1 {
  text-align: center;
  margin-top: 30px;
  font-size: 1.6rem;
}

/* ===== TABULEIRO ===== */
#board {
  width: 90vw;
  max-width: 420px;
  aspect-ratio: 1 / 1;
  margin: 30px auto;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, 1fr);
  border: 2px dashed rgba(255,255,255,0.5);
}

/* ===== SLOTS ===== */
.slot {
  border: 1px dashed rgba(255,255,255,0.3);
}

/* ===== PE√áAS ===== */
.piece {
  width: 22vw;
  max-width: 90px;
  aspect-ratio: 1 / 1;
  background-image: url("quebra/cabeca.jpg");
  background-size: 400% 400%;
  position: absolute;
  touch-action: none;
  cursor: grab;
}

/* ===== √ÅREA DE PE√áAS ===== */
#pieces {
  position: relative;
  height: 320px;
}

/* ===== TEXTO ===== */
#textBox {
  max-width: 90%;
  margin: 60px auto;
  font-size: 1.15rem;
  line-height: 1.6;
  display: none;
}

/* ===== BOT√ÉO ===== */
#btnNext {
  display: none;
  margin: 50px auto;
  padding: 15px 35px;
  font-size: 1.1rem;
  background: linear-gradient(135deg, #ff4dd8, #ff85e1);
  color: white;
  border: none;
  border-radius: 30px;
}
</style>
</head>

<body>

<h1>Monte a imagem‚Ä¶ üíú</h1>

<div id="board"></div>
<div id="pieces"></div>

<div id="textBox"></div>

<button id="btnNext" onclick="window.location.href='page7.html'">
  Continuar
</button>

<script>
const board = document.getElementById("board");
const piecesArea = document.getElementById("pieces");
const textBox = document.getElementById("textBox");
const btnNext = document.getElementById("btnNext");

let placed = 0;
const total = 16;

/* ===== CRIA SLOTS ===== */
for (let i = 0; i < total; i++) {
  const slot = document.createElement("div");
  slot.className = "slot";
  slot.dataset.index = i;
  board.appendChild(slot);
}

/* ===== CRIA PE√áAS ===== */
for (let i = 0; i < total; i++) {
  const piece = document.createElement("div");
  piece.className = "piece";
  piece.dataset.index = i;

  const x = (i % 4) * 33.33;
  const y = Math.floor(i / 4) * 33.33;
  piece.style.backgroundPosition = `${x}% ${y}%`;

  piece.style.left = Math.random() * 70 + "vw";
  piece.style.top = Math.random() * 220 + "px";

  enableDrag(piece);
  piecesArea.appendChild(piece);
}

/* ===== DRAG ===== */
function enableDrag(el) {
  let offsetX, offsetY;

  el.addEventListener("pointerdown", e => {
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;
    el.setPointerCapture(e.pointerId);
  });

  el.addEventListener("pointermove", e => {
    if (e.pressure === 0) return;
    el.style.left = e.clientX - offsetX + "px";
    el.style.top = e.clientY - offsetY + "px";
  });

  el.addEventListener("pointerup", e => {
    el.releasePointerCapture(e.pointerId);
    checkSnap(el);
  });
}

/* ===== SNAP ===== */
function checkSnap(piece) {
  const index = piece.dataset.index;
  const slot = board.children[index];
  const r1 = piece.getBoundingClientRect();
  const r2 = slot.getBoundingClientRect();

  if (
    Math.abs(r1.left - r2.left) < 25 &&
    Math.abs(r1.top - r2.top) < 25
  ) {
    piece.style.left = r2.left + "px";
    piece.style.top = r2.top + "px";
    piece.style.pointerEvents = "none";
    placed++;

    if (placed === total) startText();
  }
}

/* ===== TEXTO ===== */
const text = `
Quando nossos corpos se encaixam assim,
n√£o √© s√≥ pele com pele‚Ä¶

√â desejo que reconhece desejo,
√© meu toque encontrando o lugar exato do teu corpo.

Cada detalhe teu me chama,
cada aproxima√ß√£o me deixa sem controle.

E quando eu te tenho perto,
o mundo some‚Ä¶
sobra s√≥ a vontade,
o calor,
e essa conex√£o que √© s√≥ nossa.
`;

let i = 0;
function startText() {
  textBox.style.display = "block";
  type();
}

function type() {
  if (i < text.length) {
    textBox.innerHTML += text.charAt(i);
    i++;
    window.scrollBy(0, 1);
    setTimeout(type, 35);
  } else {
    btnNext.style.display = "block";
    btnNext.scrollIntoView({ behavior: "smooth" });
  }
}
</script>

</body>
</html>
