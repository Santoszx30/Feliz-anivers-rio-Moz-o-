<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pinte o Amor</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  min-height:100vh;
  font-family:Arial,sans-serif;
  background:linear-gradient(135deg,#12001f,#3a0066,#001a33);
  display:flex;
  flex-direction:column;
  align-items:center;
  color:white;
}

h1{
  margin:18px;
  text-align:center;
  font-size:1.4rem;
  color:#e9d5ff;
}

#contador{
  margin-bottom:12px;
  font-size:1rem;
  color:#c4b5fd;
}

#quadro{
  width:95vw;
  height:78vh;
  max-width:520px;
  position:relative;
  border-radius:20px;
  box-shadow:0 0 30px rgba(180,0,255,.7);
  background:#2a2340;
  overflow:hidden;
}

canvas{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  touch-action:none;
}

#final{
  display:none;
  text-align:center;
  margin:25px 20px;
}

#final h2{
  font-size:1.6rem;
  margin-bottom:15px;
  color:#f5d0fe;
}

#final p{
  font-size:1.1rem;
  line-height:1.6;
  margin-bottom:25px;
}

button{
  padding:15px 35px;
  font-size:1.1rem;
  border:none;
  border-radius:30px;
  cursor:pointer;
  background:linear-gradient(45deg,#9b4dff,#d08cff);
  color:white;
  box-shadow:0 0 18px rgba(180,0,255,.6);
}
</style>
</head>

<body>

<h1>Pinte a maneira de como eu enxergo sua beleza</h1>
<div id="contador">Quadro revelado: 0%</div>

<div id="quadro">
  <!-- IMAGEM FIXA -->
  <canvas id="imgCanvas"></canvas>
  <!-- TINTA -->
  <canvas id="paintCanvas"></canvas>
</div>

<div id="final">
  <h2>Feliz aniversÃ¡rio minha nenÃ©m ðŸ’œ</h2>
  <p>
    VocÃª Ã© tÃ£o linda quanto a Lua,<br>
    brilha tanto quanto o Sol,<br>
    e ilumina minha vida de um jeito que sÃ³ vocÃª consegue.<br><br>
    Eu te amo.
  </p>
  <button onclick="window.location.href='pagina6.html'">
    Continuar ðŸ’œ
  </button>
</div>

<script>
const imgCanvas = document.getElementById("imgCanvas");
const paintCanvas = document.getElementById("paintCanvas");
const imgCtx = imgCanvas.getContext("2d");
const paintCtx = paintCanvas.getContext("2d");

const contador = document.getElementById("contador");
const finalBox = document.getElementById("final");

const img = new Image();
img.src = "coracao/amor1.jpg";

let painting = false;
let revealed = 0;
let totalArea = 0;

function resize(){
  const rect = document.getElementById("quadro").getBoundingClientRect();

  imgCanvas.width = paintCanvas.width = rect.width;
  imgCanvas.height = paintCanvas.height = rect.height;

  imgCtx.drawImage(img,0,0,rect.width,rect.height);

  paintCtx.fillStyle = "#2a2340";
  paintCtx.fillRect(0,0,rect.width,rect.height);

  paintCtx.globalCompositeOperation = "destination-out";

  totalArea = rect.width * rect.height;
}

img.onload = resize;
window.addEventListener("resize", resize);

function start(e){
  painting = true;
  paint(e);
}

function stop(){
  painting = false;
}

function paint(e){
  if(!painting) return;

  const rect = paintCanvas.getBoundingClientRect();
  const p = e.touches ? e.touches[0] : e;

  const x = p.clientX - rect.left;
  const y = p.clientY - rect.top;

  paintCtx.beginPath();
  paintCtx.arc(x,y,22,0,Math.PI*2);
  paintCtx.fill();

  revealed += 22*22;
  updateProgress();
}

function updateProgress(){
  const percent = Math.min(
    Math.floor((revealed / totalArea) * 100),
    100
  );

  contador.innerText = `Quadro revelado: ${percent}%`;

  if(percent >= 90){
    finalBox.style.display = "block";
  }
}

paintCanvas.addEventListener("touchstart",start);
paintCanvas.addEventListener("touchmove",paint);
paintCanvas.addEventListener("touchend",stop);

paintCanvas.addEventListener("mousedown",start);
paintCanvas.addEventListener("mousemove",paint);
window.addEventListener("mouseup",stop);
</script>

</body>
</html>
