<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PÃ¡gina 5</title>

<style>
    body {
        margin: 0;
        min-height: 100vh;
        background: linear-gradient(180deg, #0b0014, #000);
        display: flex;
        flex-direction: column;
        align-items: center;
        color: white;
        font-family: Arial, sans-serif;
    }

    h1 {
        margin: 20px 10px;
        text-align: center;
        font-size: 1.2rem;
    }

    canvas {
        border: 4px solid #7c4dff;
        border-radius: 16px;
        width: 90vw;
        height: 70vh;
        touch-action: none;
        background: #000;
    }

    #final {
        display: none;
        margin: 30px 15px;
        text-align: center;
        animation: fadeIn 1s ease;
    }

    #final h2 {
        font-size: 1.4rem;
        margin-bottom: 10px;
    }

    #final p {
        font-size: 1rem;
        line-height: 1.4;
    }

    #final button {
        margin-top: 20px;
        padding: 12px 25px;
        font-size: 1rem;
        border: none;
        border-radius: 25px;
        background: #7c4dff;
        color: white;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
</head>

<body>

<h1>ðŸŽ¨ Pinte a maneira de como eu enxergo sua beleza</h1>

<canvas id="canvas"></canvas>

<div id="final">
    <h2>Feliz aniversÃ¡rio minha nenÃ©m ðŸ’œ</h2>
    <p>
        VocÃª Ã© tÃ£o linda como a lua  
        <br>e brilha tanto quanto o Sol.  
        <br>Eu te amo.
    </p>
    <button onclick="window.location.href='pagina6.html'">
        Ir para a prÃ³xima pÃ¡gina
    </button>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

const pixelSize = 16; // â†“ menor = mais detalhe
let cols, rows;
let revealed = [];

const img = new Image();
img.src = "coracao/amor1.jpg";

img.onload = () => {
    cols = Math.floor(canvas.width / pixelSize);
    rows = Math.floor(canvas.height / pixelSize);

    revealed = Array(cols * rows).fill(false);

    draw();
};

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
            const i = y * cols + x;

            if (revealed[i]) {
                ctx.drawImage(
                    img,
                    x * img.width / cols,
                    y * img.height / rows,
                    img.width / cols,
                    img.height / rows,
                    x * pixelSize,
                    y * pixelSize,
                    pixelSize,
                    pixelSize
                );
            } else {
                ctx.fillStyle = "#000";
                ctx.fillRect(
                    x * pixelSize,
                    y * pixelSize,
                    pixelSize,
                    pixelSize
                );
            }
        }
    }
}

function paint(e) {
    const rect = canvas.getBoundingClientRect();

    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;

    const x = Math.floor((clientX - rect.left) / pixelSize);
    const y = Math.floor((clientY - rect.top) / pixelSize);

    if (x >= 0 && y >= 0 && x < cols && y < rows) {
        const index = y * cols + x;
        revealed[index] = true;
        draw();
        checkFinish();
    }
}

function checkFinish() {
    if (revealed.every(v => v)) {
        document.getElementById("final").style.display = "block";
    }
}

canvas.addEventListener("mousedown", paint);
canvas.addEventListener("mousemove", e => e.buttons && paint(e));
canvas.addEventListener("touchstart", paint);
canvas.addEventListener("touchmove", paint);
</script>

</body>
</html>
