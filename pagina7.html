<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Página 7 ♟️</title>
<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: radial-gradient(circle at top, #3b0a57, #12001a);
  font-family: Arial, sans-serif;
}

#board {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
  width: 90vmin;
  height: 90vmin;
  border: 5px solid #a855f7;
  box-shadow: 0 0 25px #a855f7;
  margin: auto;
  position: relative;
}

.cell {
  width: 100%;
  height: 100%;
}

.light { background: #1a1a1a; }
.dark  { background: #0b0b0b; }

.piece {
  width: 80%;
  height: 80%;
  border-radius: 50%;
  margin: auto;
  margin-top: 10%;
}

.player { background: #9333ea; }
.ai     { background: #dc2626; }
.king   { border: 3px solid gold; }

.highlight { outline: 3px solid #22c55e; }

.capture-flash {
  position: absolute; inset: 0;
  background: rgba(255,255,255,0.4);
  animation: flash 0.3s ease forwards;
  pointer-events: none;
  z-index: 1000;
}

@keyframes flash {
  0% { opacity: 0; }
  50% { opacity: 1; }
  100% { opacity: 0; }
}

.break-piece {
  position: absolute;
  width: 80%;
  height: 80%;
  border-radius: 50%;
  transform-origin: center;
  animation: breakAnim 0.6s forwards;
  z-index: 1000;
}

@keyframes breakAnim {
  0% { transform: scale(1) rotate(0deg); opacity: 1; }
  50% { transform: scale(1.2) rotate(30deg); opacity: 1; }
  100% { transform: scale(0) rotate(120deg); opacity: 0; }
}

.capture-effect {
  position: fixed;
  top: 50%; left: 50%;
  width: 200px; height: 200px;
  margin-left: -100px; margin-top: -100px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: flex-end;
  pointer-events: none;
  transform: scale(0);
  animation: capturePop 0.7s forwards;
  z-index: 1000;
}

.capture-effect img {
  width: 100%; height: 80%; object-fit: cover;
  border-radius: 12px;
}

.capture-effect p {
  color: white;
  text-align: center;
  padding: 5px;
  font-size: 0.9rem;
}

@keyframes capturePop {
  0% { transform: scale(0) rotate(-20deg); opacity: 0; }
  50% { transform: scale(1.1) rotate(10deg); opacity: 1; }
  70% { transform: scale(0.95) rotate(-5deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

#finalEffect {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(0);
  width: 300px; max-width: 90vw;
  text-align: center; z-index: 2000;
  animation: finalPop 1s forwards;
}

#finalEffect img { width: 100%; border-radius: 15px; margin-bottom: 10px; }
#finalEffect p { color: white; font-size: 1rem; line-height: 1.5; }

@keyframes finalPop {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
  70% { transform: translate(-50%, -50%) scale(0.95); }
  100% { transform: translate(-50%, -50%) scale(1); }
}
</style>
</head>
<body>
<div id="board"></div>

<script>
const SIZE = 8;
const board = document.getElementById("board");
let state = Array.from({length: SIZE}, () => Array(SIZE).fill(null));
let cells = [];
let selected = null;
let turn = "player";
let waitingAI = false;

// Frases + fotos
const captureTexts = [
  "Seu olhar me derrete.",
  "Quero sentir você perto.",
  "Cada curva sua me provoca.",
  "Não consigo tirar você da cabeça.",
  "Você é desejo puro.",
  "Sinto sua falta mesmo perto.",
  "Quero explorar cada detalhe seu.",
  "Seu corpo me chama.",
  "Você é minha tentação favorita.",
  "Cada toque seu me enlouquece.",
  "Você é linda demais para palavras.",
  "Quero te ter só para mim."
];
let captureIndex = 0;

// CRIA TABULEIRO
function createBoard() {
  board.innerHTML = "";
  cells = [];
  for(let y=0; y<SIZE; y++){
    for(let x=0; x<SIZE; x++){
      const cell = document.createElement("div");
      cell.className = (x+y)%2 ? "dark cell":"light cell";
      cell.dataset.x=x;
      cell.dataset.y=y;
      cell.onclick = () => onCellClick(x,y);
      board.appendChild(cell);
      cells.push(cell);
    }
  }
}

// POSICIONA PEÇAS
function placePieces(){
  for(let y=0;y<3;y++) for(let x=0;x<SIZE;x++) if((x+y)%2===1) state[y][x]={type:"ai",king:false};
  for(let y=5;y<SIZE;y++) for(let x=0;x<SIZE;x++) if((x+y)%2===1) state[y][x]={type:"player",king:false};
}

// RENDERIZA TABULEIRO
function render(){
  cells.forEach(c=>c.innerHTML="");
  for(let y=0;y<SIZE;y++){
    for(let x=0;x<SIZE;x++){
      const p = state[y][x];
      if(p){
        const el = document.createElement("div");
        el.className = `piece ${p.type}${p.king?" king":""}`;
        cells[y*SIZE+x].appendChild(el);
      }
    }
  }
}

// VALIDA MOVIMENTO
function isMoveValid(x1,y1,x2,y2){
  if(state[y2][x2]) return false;
  const piece = state[y1][x1];
  const dx = x2-x1, dy=y2-y1;

  if(!piece.king){
    if(piece.type==="player" && ![-1,-2].includes(dy)) return false;
    if(piece.type==="ai" && ![1,2].includes(dy)) return false;
    if(Math.abs(dx)===1 && Math.abs(dy)===1) return true;
    if(Math.abs(dx)===2 && Math.abs(dy)===2){
      const mx=(x1+x2)/2,my=(y1+y2)/2;
      return state[my][mx] && state[my][mx].type!==piece.type;
    }
    return false;
  }

  // DAMA
  if(Math.abs(dx)!==Math.abs(dy)) return false;
  const stepX=dx>0?1:-1, stepY=dy>0?1:-1;
  let cx=x1+stepX, cy=y1+stepY, enemyFound=null;
  while(cx!==x2 && cy!==y2){
    if(state[cy][cx]){
      if(state[cy][cx].type===piece.type) return false;
      if(enemyFound) return false;
      enemyFound={x:cx,y:cy};
    }
    cx+=stepX; cy+=stepY;
  }
  return true;
}

// MOVE PEÇA
function movePiece(x1,y1,x2,y2){
  const piece = state[y1][x1];
  let captured=false;
  // Checa captura simples
  if(Math.abs(x2-x1)===2){
    const mx=(x1+x2)/2,my=(y1+y2)/2;
    const color=state[my][mx].type==="ai"?"#dc2626":"#9333ea";
    state[my][mx]=null;
    captured=true;
    showCaptureEffect(mx,my,color);
  }

  // Checa Dama captura
  if(piece.king){
    const stepX=x2>x1?1:-1, stepY=y2>y1?1:-1;
    let cx=x1+stepX, cy=y1+stepY;
    while(cx!==x2 && cy!==y2){
      if(state[cy][cx] && state[cy][cx].type!==piece.type){
        state[cy][cx]=null;
        captured=true;
        showCaptureEffect(cx,cy,state[cy][cx].type==="ai"?"#dc2626":"#9333ea");
        break;
      }
      cx+=stepX; cy+=stepY;
    }
  }

  state[y2][x2]=piece;
  state[y1][x1]=null;

  // VIRAR DAMA
  if(piece.type==="player" && y2===0) piece.king=true;
  if(piece.type==="ai" && y2===SIZE-1) piece.king=true;

  render();
  clearHighlights();

  // MULTICAPTURA
  if(captured && piece.type==="player" && pieceHasCapture(x2,y2)){
    selected={x:x2,y:y2};
    highlightMoves(x2,y2);
    turn="player";
    return;
  }

  selected=null;
  if(turn==="player") turn="ai", setTimeout(aiMove,600);
}

// CHECA MULTICAPTURA
function pieceHasCapture(x,y){
  const piece=state[y][x]; if(!piece) return false;
  const dirs=piece.king?[-2,2]:piece.type==="player"?[-2]:[2];
  for(let dy of dirs) for(let dx of [-2,2]){
    const nx=x+dx, ny=y+dy;
    if(nx>=0 && nx<SIZE && ny>=0 && ny<SIZE && isMoveValid(x,y,nx,ny)) return true;
  }
  return false;
}

// DESTAQUE POSSÍVEL MOVIMENTO
function highlightMoves(x,y){
  const piece=state[y][x]; if(!piece) return;
  const directions=piece.king?[-1,1]:piece.type==="player"?[-1]:[1];
  for(let dy of directions){
    for(let dx of [-1,1]){
      let nx=x+dx, ny=y+dy;
      while(nx>=0 && nx<SIZE && ny>=0 && ny<SIZE && !state[ny][nx]){
        cells[ny*SIZE+nx].classList.add("highlight");
        if(!piece.king) break;
        nx+=dx; ny+=dy;
      }
      let jumpX=x+dx*2, jumpY=y+dy*2;
      if(jumpX>=0 && jumpX<SIZE && jumpY>=0 && jumpY<SIZE && isMoveValid(x,y,jumpX,jumpY))
        cells[jumpY*SIZE+jumpX].classList.add("highlight");
    }
  }
}

function clearHighlights(){ cells.forEach(c=>c.classList.remove("highlight")); }

// CLIQUE
function onCellClick(x,y){
  if(turn!=="player"||waitingAI) return;
  clearHighlights();
  const piece=state[y][x];
  if(selected && isMoveValid(selected.x,selected.y,x,y)){
    movePiece(selected.x,selected.y,x,y);
    return;
  }
  if(piece && piece.type==="player"){ selected={x,y}; highlightMoves(x,y); }
}

// IA SIMPLES
function aiMove(){
  let moves=[];
  for(let y=0;y<SIZE;y++) for(let x=0;x<SIZE;x++){
    const p=state[y][x];
    if(p && p.type==="ai"){
      for(let dx of [-1,1]) for(let dy of [1]){
        const nx=x+dx, ny=y+dy;
        if(nx>=0 && nx<SIZE && ny>=0 && ny<SIZE && !state[ny][nx]) moves.push({x1:x,y1:y,x2:nx,y2:ny});
      }
    }
  }
  if(moves.length){
    const m=moves[Math.floor(Math.random()*moves.length)];
    movePiece(m.x1,m.y1,m.x2,m.y2);
  }
  turn="player";
}

// CAPTURA
function showCaptureEffect(x,y,color="#9333ea"){
  const flash=document.createElement("div");
  flash.className="capture-flash";
  document.body.appendChild(flash);
  setTimeout(()=>flash.remove(),300);

  const pieceBreak=document.createElement("div");
  pieceBreak.className="break-piece";
  pieceBreak.style.backgroundColor=color;

  const rect=cells[y*SIZE+x].getBoundingClientRect();
  pieceBreak.style.top=rect.top+"px";
  pieceBreak.style.left=rect.left+"px";
  document.body.appendChild(pieceBreak);
  setTimeout(()=>pieceBreak.remove(),600);

  if(captureIndex<12){
    const effect=document.createElement("div");
    effect.className="capture-effect";
    const img=document.createElement("img");
    img.src=`captura/captura${captureIndex+1}.jpg`;
    const p=document.createElement("p");
    p.textContent=captureTexts[captureIndex];
    effect.appendChild(img); effect.appendChild(p);
    document.body.appendChild(effect);
    captureIndex++;
    setTimeout(()=>effect.remove(),2500);
  }
}

// INICIALIZA
createBoard(); placePieces(); render();
</script>
</body>
  </html>
