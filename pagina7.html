<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Damas</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle,#3b0a57,#12001a);
  font-family:Arial, sans-serif;
}

/* CONTAINER */
#game{
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* TABULEIRO */
#board{
  width:420px;
  height:420px;
  display:grid;
  grid-template-columns:repeat(8,1fr);
  border:4px solid #a855f7;
  box-shadow:0 0 25px rgba(180,0,255,.6);
}

/* CASAS */
.cell{
  display:flex;
  justify-content:center;
  align-items:center;
  background:#111;
}
.cell.dark{background:#000}
.cell.highlight{outline:3px solid #a855f7}

/* PEÇAS */
.piece{
  width:70%;
  height:70%;
  border-radius:50%;
}
.purple{background:#a855f7}
.red{background:#dc2626}
.king{outline:3px solid gold}
</style>
</head>

<body>
<div id="game">
  <h2 style="color:white">Damas ♟️</h2>
  <div id="board"></div>
</div>

<script>
const board=document.getElementById("board");
let selected=null;

/* ESTADO */
let state=Array(64).fill(null);

function idx(r,c){return r*8+c}

/* CRIA TABULEIRO */
for(let r=0;r<8;r++){
  for(let c=0;c<8;c++){
    const cell=document.createElement("div");
    cell.className="cell "+((r+c)%2?"dark":"");
    cell.dataset.i=idx(r,c);
    cell.onclick=()=>cellClick(idx(r,c));
    board.appendChild(cell);
  }
}

/* PEÇAS INICIAIS */
for(let r=0;r<3;r++)
 for(let c=0;c<8;c++)
  if((r+c)%2) state[idx(r,c)]={color:"red",king:false};

for(let r=5;r<8;r++)
 for(let c=0;c<8;c++)
  if((r+c)%2) state[idx(r,c)]={color:"purple",king:false};

function render(){
  board.querySelectorAll(".piece").forEach(p=>p.remove());
  board.querySelectorAll(".highlight").forEach(h=>h.classList.remove("highlight"));

  state.forEach((p,i)=>{
    if(p){
      const el=document.createElement("div");
      el.className="piece "+p.color+(p.king?" king":"");
      board.children[i].appendChild(el);
    }
  });
}
render();

/* CLIQUE */
function cellClick(i){
  if(selected===null){
    if(state[i] && state[i].color==="purple"){
      selected=i;
      highlightMoves(i);
    }
  }else{
    if(board.children[i].classList.contains("highlight")){
      move(selected,i);
    }
    selected=null;
    render();
    setTimeout(aiMove,500);
  }
}

/* MOVIMENTOS */
function highlightMoves(i){
  const p=state[i];
  const r=Math.floor(i/8),c=i%8;
  const dirs=p.king?[-1,1]:[-1];

  dirs.forEach(dr=>{
    [-1,1].forEach(dc=>{
      const nr=r+dr,nc=c+dc;
      if(nr>=0&&nr<8&&nc>=0&&nc<8){
        const ni=idx(nr,nc);
        if(!state[ni]) board.children[ni].classList.add("highlight");
      }
    });
  });
}

function move(from,to){
  state[to]=state[from];
  state[from]=null;

  if(Math.floor(to/8)===0) state[to].king=true;
}

/* IA SIMPLES */
function aiMove(){
  const reds=state.map((p,i)=>p&&p.color==="red"?i:null).filter(i=>i!==null);
  if(!reds.length) return;

  for(const from of reds){
    const r=Math.floor(from/8),c=from%8;
    for(const dc of [-1,1]){
      const nr=r+1,nc=c+dc;
      if(nr<8&&nc>=0&&nc<8){
        const ni=idx(nr,nc);
        if(!state[ni]){
          state[ni]=state[from];
          state[from]=null;
          render();
          return;
        }
      }
    }
  }
}
</script>
</body>
</html>
